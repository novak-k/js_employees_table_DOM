{"version":3,"sources":["scripts/main.js"],"names":["header","document","querySelector","body","rows","employeeForm","createElement","classList","add","innerHTML","makeColFromForm","attr","formater","validate","value","col","result","isValid","error","addEventListener","e","preventDefault","row","cols","val","length","push","toString","toLocaleString","every","c","append","map","co","showNotification","reset","errors","reduce","acc","curr","makeComparableNumber","cellIdx","normalized","makeComparable","cells","slice","replaceAll","sortOrder","headerEl","target","closest","cellIndex","sorted","sort","rowA","rowB","localeCompare","children","forEach","remove","parentElement","title","description","type","clearNotification","insertAdjacentHTML","divEl","style","marginTop","marginLeft","setTimeout","notifications","getElementsByClassName"],"mappings":"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","file":"main.dccc059a.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nconst header = document.querySelector('thead');\nconst body = document.querySelector('tbody');\nconst rows = body.rows;\nconst employeeForm = document.createElement('form');\n\nemployeeForm.classList.add('new-employee-form');\n\nemployeeForm.innerHTML = `\n    <label>Name:\n      <input type=\"text\" name=\"name\" data-qa=\"name\">\n    </label>\n    <label>Position:\n      <input type=\"text\" name=\"position\" data-qa=\"position\">\n    </label>\n    <label>Office:\n      <select name=\"office\" data-qa=\"office\">\n        <option value=\"Tokyo\">Tokyo</option>\n        <option value=\"Singapore\">Singapore</option>\n        <option value=\"London\">London</option>\n        <option value=\"New York\">New York</option>\n        <option value=\"Edinburgh\">Edinburgh</option>\n        <option value=\"San Francisco\">San Francisco</option>\n      </select>\n    </label>\n    <label>Age:\n      <input type=\"number\" name=\"age\" data-qa=\"age\">\n    </label>\n    <label>Salary:\n      <input type=\"number\" name=\"salary\" data-qa=\"salary\">\n    </label>\n    <button type=\"submit\">Save to table</button>\n`;\n\nconst makeColFromForm = (attr, formater, validate) => {\n  let value = document.querySelector(`[data-qa='${attr}']`).value;\n  const col = document.createElement('td');\n\n  if (formater) {\n    value = formater(value);\n  }\n\n  let result = {\n    isValid: true,\n    error: '',\n  };\n\n  if (validate) {\n    result = validate(value);\n\n    if (!result.isValid) {\n      return {\n        isValid: result.isValid,\n        col: null,\n        error: result.error,\n      };\n    }\n  }\n  col.innerHTML = value;\n\n  return {\n    isValid: result.isValid,\n    col,\n    error: '',\n  };\n};\n\nemployeeForm.addEventListener('submit', e => {\n  e.preventDefault();\n\n  const row = document.createElement('tr');\n\n  const cols = [];\n  let result = makeColFromForm('name', null, (val) => {\n    return {\n      isValid: val.length >= 4,\n      error: 'Name length is less than 4 chars',\n    };\n  });\n\n  cols.push(result);\n\n  result = makeColFromForm('position', null, (val) => {\n    return {\n      isValid: val.length >= 4,\n      error: 'Position length is less than 4 chars',\n    };\n  });\n  cols.push(result);\n  result = makeColFromForm('office');\n  cols.push(result);\n\n  result = makeColFromForm('age', (val) => val.toString(), (val) => {\n    return {\n      isValid: +val >= 18 && +val <= 90,\n      error: 'Age is less than 18 y.o. or greater than 90 y.o.',\n    };\n  });\n  cols.push(result);\n  result = makeColFromForm('salary', (val) => '$' + (+val).toLocaleString());\n  cols.push(result);\n\n  const isValid = cols.every(c => c.isValid);\n\n  if (isValid) {\n    row.append(...cols.map(co => co.col));\n    showNotification('Success', 'Employee added', 'success');\n    body.append(row);\n    employeeForm.reset();\n  } else {\n    const errors = cols.reduce((acc, curr) => {\n      acc.error += '\\n' + curr.error;\n\n      return acc;\n    }, { error: '' }).error;\n\n    showNotification('Validation error', errors, 'error');\n  }\n});\n\ndocument.body.append(employeeForm);\n\nconst makeComparableNumber = (row, cellIdx, normalized) => {\n  return +makeComparable(row, cellIdx, normalized);\n};\n\nconst makeComparable = (row, cellIdx, normalized) => {\n  return normalized\n    ? row.cells[cellIdx].innerHTML.slice(1).replaceAll(',', '')\n    : row.cells[cellIdx].innerHTML;\n};\n\nlet sortOrder = 1;\n\nheader.addEventListener('click', e => {\n  const headerEl = e.target.closest('th');\n  const cellIndex = e.target.cellIndex;\n\n  if (!headerEl) {\n    return;\n  }\n\n  const sorted = [...rows];\n\n  sorted.sort((rowA, rowB) => {\n    switch (cellIndex) {\n      case 3:\n        return makeComparableNumber(sortOrder > 0\n          ? rowA : rowB, cellIndex)\n           - makeComparableNumber(sortOrder > 0\n             ? rowB : rowA, cellIndex);\n      case 4:\n        return makeComparableNumber(sortOrder > 0\n          ? rowA : rowB, cellIndex, true)\n        - makeComparableNumber(sortOrder > 0\n          ? rowB : rowA, cellIndex, true);\n      default:\n        return makeComparable(sortOrder > 0\n          ? rowA : rowB, cellIndex)\n          .localeCompare(makeComparable(sortOrder > 0\n            ? rowB : rowA, cellIndex));\n    }\n  });\n  body.append(...sorted);\n  sortOrder = -sortOrder;\n});\n\nbody.addEventListener('click', e => {\n  const bodyEl = e.target.closest('tr');\n\n  if (!bodyEl) {\n    return;\n  }\n\n  [...body.children].forEach(row => {\n    row.classList.remove('active');\n  });\n\n  e.target.parentElement.classList.add('active');\n});\n\nconst showNotification = (title, description, type) => {\n  clearNotification();\n\n  const bodyEl = document.body;\n\n  bodyEl.insertAdjacentHTML('afterbegin', `\n    <div class='notification ${type}' data-qa=\"notification\">\n      <h2 class='title'>\n      ${title}\n      </h2>\n      <p>${description}</p>\n    </div>\n  `);\n\n  const divEl = document.querySelector('div');\n\n  divEl.style.marginTop = `440px`;\n  divEl.style.marginLeft = `5px`;\n\n  setTimeout(() => clearNotification(), 6000);\n};\n\nconst clearNotification = () => {\n  const notifications = document.getElementsByClassName('notification');\n\n  for (const el of notifications) {\n    el.remove();\n  }\n};\n"]}